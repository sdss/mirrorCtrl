!+
!              Mirror Information for SDSS 2.5m Telescope
!
! History:
! 1   first version with all values approximately correct. R.O. 6/20/98
! 1-2 corrected Sec scale and limits. R.O. 6/21/98
! 1-3 corrected SecCtrBaseZ. R.O. 6/21/98
! 1-4 improved Prim base positions and SecMountOffset. R.O. 6/22/98
! 1-5 improved PrimMountScale and SecMountOffset based on measurements. R.O. 6/22/98
! 1-6 updated PrimMountOffset after telescope teardown. R.O. 2/26/99
! 1-7 updated M1 lateral link scale based on linear gauges;
!     the other M1 actuators were fine. R.O. 3/2/99
! 1-8 changed SecNAct to 3 to prohibit transverse motion
!     due to the central support flex pivots breaking. who? date?
! 1-9 in honor of the new central linear support, changed SecNAct back to 5,
!     SecCtrMirZ approx. 2 mm and the transverse Zs insignificantly.
!     Also set SecMoutOffset to 0 for all axes to begin collimation. R.O. 8/16/99
! 1-10 set SecMountOffset[4,5] = -1000, -1000 after measuring center
!     of travel of axial pin with French (with mirror installed--ouch). R.O. 8/16/99
! 1-11 set PrimNAct to 4 to disable lateral links. This is temporary until
!     the Galil can be changed to not disable the lateral air fuses unless
!     the position of the lateral links is actually changing. R.O. 10/12/99
! 1-12 added PrimNConst and SecNConst for TCC version 2.2. R.O. 12/27/99
! 1-13 modified for interim support system for repaired secondary. R.O. 1/26/00
! 1-14 set PrimNAct to 6, now that the lateral links don't disengage
!     unless their position is actually changing. R.O. 12/27/99
! 1-15 added xNAddStatus for TCC version 2.2.4. R.O. 3/10/00
! 1-16 updated PrimMountOffset for new mechanical collimation. R.O. 10/31/00
! 1-17 updated SecMountOffset for new mech coll. R.O. 11/1/00
! 1-18 changed SecNAddStatus from 0 to 2 for new M2 piezo code. R.O. 3/8/01
! 1-19 changed SecMountOffset for new mech coll. R.O. 8/13/02
! 1-20 changed PrimMountOffset for new mechanical collimation. R.O. 9/17/03
! 1-21 changed PrimMountOffset for new mechanical collimation. DL  11/14/03
! 1-22 changed PrimMountOffset for axial c positional change.  DL  05/20/04
! 1-23 changed PrimMountOffset for new mechanical collimation. DL  08/23/08
! 1-24 changed PrimMountOffset for new mechanical collimagion. DL  08/22/11
!
! Warnings:
! - most of this info is from drawings and may be a bit off
! - M1 offsets are based on mechanical centering of the mirror
!   the actuator lengths may be somewhat incorrect
! - M2 offsets are based on feeler gauge measurements of
!   the position of the actuator puck in the hole
!-
!+
!      Primary Mirror
!
! The primary mirror is positioned by three axial actuators and one transverse
! actuator (along x, acting up/down when the mirror is at horizon) that control
! hard points for an air support servo system. In addition, the x translation
! of the mirror is controlled by two lateral links, one at the top of the mirror
! and the other at the bottom.
!
! After a y translation the mirror will have moved, but it will have slid
! across high friction air pistons. Relaxing the mirror support system
! by bringing the telescope near the zenith and then repeatedly lowering
! the mirror off air and then raising it again.
!
! The lateral links are not strong enough to move the mirror, so after an x
! translation one must walk the mirror over by relaxing it as described above.
!-

! Number of actuators and constraints
! SET THESE BEFORE ANY OTHER PARAMETERS FOR THIS MIRROR!
! To control x position (during collimation) set PrimNAct to 6 and PrimNConst to 0
! To run the telescope set PrimNAct to 4 and PrimNConst to 2
PrimNAct   6
PrimNConst 0

! Mirror type (see tinc:MirDef.for for codes)
PrimType   2  ! direct: all actuators connected directly to mirror

! Number of additional status lines for local modifications
PrimNAddStatus 1	! air link status

! Actuators are: Axial A, B, C, Trans Vert, Lower Lateral, Upper Lateral
! Limits of motion (mount units) for each actuator
PrimMinMount  -120000    -120000    -120000     -90000     -50000     -50000
PrimMaxMount   120000     120000     120000      90000      50000      50000

! Axial A, B, C and Trans Vert are 40 tpi, 50 microsteps/step, 200 steps/rev
! Lateral Links are 80 tpi, 50 microsteps/step, 200 steps/rev
! Offset (mount units) and scale (mount units/um) for each actuator
! This PrimMountOffset value is for M1 to be collimated on the sky with PrimX/YTiltCoef = 0
! Russell Owen put these in 2011-10-04.
! Before that change the tilt coefficients in tinst:default.dat were:
! PrimXTiltCoef      -24.31       0.0       0.0
! PrimYTiltCoef        11.3       0.0       0.0
! and the corresponding PrimMountOffset in this file (values to physically center
! the primary mirror in its cell) were:
! PrimMountOffset  9700       800       5650      -1650      -6900      -6900
PrimMountOffset 11300      -650       5500      -1650      -6900      -6900
PrimMountScale     15.696     15.696     15.696     15.696     33.22      32.53

! Axial A, B, C and Trans Vert all are not attached to the primary, so the actuator
! does not bend over when the mirror translates perpendicularly to them.
! The closest I think I can get to modelling this with the current TCC software
! is to specify a very large length for the actuator. It's not perfect, but then
! neither is any system that allows the actuator to contact the mirror wherever
! it feels like.
! Actual base positions for these actuators are as approximately as follows
! Axial A, B, C base Z = 340.00
! Trans Vert base Y = -1394.00
PrimActMirX         0.00    -749.03     749.03       0.00       0.00       0.00
PrimActMirY       864.90    -432.45    -432.45   -1305.00   -1277.00    1277.00
PrimActMirZ       251.00     251.00     251.00     238.00     262.00     262.00
PrimActBaseX        0.00    -749.03     749.03       0.00    -698.00    -698.00
PrimActBaseY      864.90    -432.45    -432.45      -9e9    -1277.00    1277.00
PrimActBaseZ        9e9        9e9        9e9      238.00     262.00     262.00

!+
!      Secondary Mirror
!
! The secondary mirror has three axial actuators. In addition,
! transverse position is set by a linear bearing that is tilted
! by two transverse actuators.
!-

! Number of actuators and constraints
! SET THESE BEFORE ANY OTHER PARAMETERS FOR THIS MIRROR!
SecNAct   5
SecNConst 0

! Mirror type (see tinc:MirDef.for for codes)
SecType   3  ! tip-trans: translate by tipping a central linear bearing

! Number of additional status lines for local modifications
SecNAddStatus 2

! Actuators are: Axial A, B, C, Transverse A, B
! Limits of motion (mount units) for each actuator
SecMinMount  -7250000   -7250000   -7250000     -18000     -18000
SecMaxMount   7250000    7250000    7250000      18000      18000

! Offset (mount units) and scale (mount units/um) for each actuator
SecMountOffset      0          0          0       1700      -1700
SecMountScale    1259.84    1259.84    1259.84      31.496     31.496

! Position of each end of each actuator (mm), relative to mirror vertex
! The offset that puts the system into collimation is probably due to two effects:
! - offset of base position (as with M1 and handle the same way)
! - misalignment of the secondary frame; this is handled as an orientation
!   offset in the instrument blocks, not in mir.dat.
! One way to separate these two effects is to measure the offset of the
! base position with respect to the frame and assign anything else to
! misalignment of the secondary frame.
SecActMirX        293.81    -233.08     -60.73      19.80     -19.80
SecActMirY         99.51     204.69    -304.20     -19.80     -19.80
SecActMirZ       -193.00    -193.00    -193.00    -263.80    -263.80
SecActBaseX       293.81    -233.08     -60.73      56.57     -56.57
SecActBaseY        99.51     204.69    -304.20     -56.57     -56.57
SecActBaseZ      -280.00    -280.00    -280.00    -263.80    -263.80

! z position of mirror and base gimbals of central linear bearing (mm)
SecCtrMirZ       -135.70
SecCtrBaseZ      -178.40

!+
!      Tertiary Mirror
!-
! Number of actuators; must be in range [0,6]
TertNAct   0   ! no such mirror
!+
!              End of Mirror Information Block
!-
